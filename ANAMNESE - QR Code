<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema MÃ©dico QR Code</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <style>
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-indigo-800 mb-2">ğŸ¥ Sistema MÃ©dico QR Code</h1>
            <p class="text-gray-600">Gerenciamento seguro de dados mÃ©dicos com QR Code</p>
        </div>

        <!-- Navigation -->
        <div class="flex justify-center mb-8">
            <div class="bg-white rounded-lg shadow-lg p-2 flex space-x-2">
                <button onclick="showSection('cadastro')" id="btn-cadastro" class="px-6 py-3 rounded-lg font-semibold transition-all duration-300 bg-indigo-600 text-white">
                    ğŸ“ Cadastrar Paciente
                </button>
                <button onclick="showSection('lista')" id="btn-lista" class="px-6 py-3 rounded-lg font-semibold transition-all duration-300 text-indigo-600 hover:bg-indigo-50">
                    ğŸ“‹ Lista de Pacientes
                </button>
                <button onclick="showSection('leitor')" id="btn-leitor" class="px-6 py-3 rounded-lg font-semibold transition-all duration-300 text-indigo-600 hover:bg-indigo-50">
                    ğŸ“± Ler QR Code
                </button>
            </div>
        </div>

        <!-- SeÃ§Ã£o Cadastro -->
        <div id="section-cadastro" class="section">
            <div class="bg-white rounded-xl shadow-xl p-8 max-w-4xl mx-auto">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                    <span class="bg-indigo-100 p-2 rounded-lg mr-3">ğŸ‘¤</span>
                    Cadastro de Paciente
                </h2>
                
                <form id="patientForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Dados Pessoais -->
                    <div class="md:col-span-2">
                        <h3 class="text-lg font-semibold text-gray-700 mb-4 border-b pb-2">ğŸ“‹ Dados Pessoais</h3>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Nome Completo *</label>
                        <input type="text" id="nome" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Data de Nascimento *</label>
                        <input type="date" id="nascimento" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">CPF *</label>
                        <input type="text" id="cpf" required placeholder="000.000.000-00" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Telefone de EmergÃªncia *</label>
                        <input type="tel" id="telefone" required placeholder="(11) 99999-9999" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tipo de Paciente *</label>
                        <select id="tipoPaciente" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            <option value="">Selecione...</option>
                            <option value="idoso">ğŸ‘´ Idoso</option>
                            <option value="deficiencia">â™¿ Pessoa com DeficiÃªncia</option>
                            <option value="cronica">ğŸ¥ DoenÃ§a CrÃ´nica</option>
                            <option value="rara">ğŸ”¬ DoenÃ§a Rara</option>
                            <option value="outros">ğŸ“‹ Outros</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tipo SanguÃ­neo *</label>
                        <select id="tipoSanguineo" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            <option value="">Selecione...</option>
                            <option value="A+">A+</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B-">B-</option>
                            <option value="AB+">AB+</option>
                            <option value="AB-">AB-</option>
                            <option value="O+">O+</option>
                            <option value="O-">O-</option>
                        </select>
                    </div>

                    <!-- Dados MÃ©dicos -->
                    <div class="md:col-span-2 mt-6">
                        <h3 class="text-lg font-semibold text-gray-700 mb-4 border-b pb-2">ğŸ¥ InformaÃ§Ãµes MÃ©dicas</h3>
                    </div>
                    
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">CondiÃ§Ãµes MÃ©dicas</label>
                        <textarea id="condicoes" rows="3" placeholder="Diabetes, HipertensÃ£o, Alzheimer, etc." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"></textarea>
                    </div>
                    
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Medicamentos em Uso</label>
                        <textarea id="medicamentos" rows="3" placeholder="Lista de medicamentos e dosagens" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"></textarea>
                    </div>
                    
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Alergias</label>
                        <textarea id="alergias" rows="2" placeholder="Alergias medicamentosas, alimentares, etc." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">MÃ©dico ResponsÃ¡vel</label>
                        <input type="text" id="medico" placeholder="Dr. JoÃ£o Silva - CRM 12345" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Contato de EmergÃªncia</label>
                        <input type="text" id="contatoEmergencia" placeholder="Nome e telefone" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                    
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ObservaÃ§Ãµes Especiais</label>
                        <textarea id="observacoes" rows="2" placeholder="InformaÃ§Ãµes importantes para emergÃªncias" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"></textarea>
                    </div>
                    
                    <div class="md:col-span-2 mt-6">
                        <button type="submit" class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-4 px-6 rounded-lg font-semibold text-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105">
                            ğŸ’¾ Cadastrar e Gerar QR Code
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- SeÃ§Ã£o Lista -->
        <div id="section-lista" class="section hidden">
            <div class="bg-white rounded-xl shadow-xl p-8 max-w-6xl mx-auto">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                        <span class="bg-indigo-100 p-2 rounded-lg mr-3">ğŸ“‹</span>
                        Lista de Pacientes
                    </h2>
                    <div class="text-sm text-gray-600">
                        Total: <span id="totalPacientes" class="font-bold text-indigo-600">0</span> pacientes
                    </div>
                </div>
                
                <!-- Filtros -->
                <div class="mb-6 flex flex-wrap gap-4">
                    <select id="filtroTipo" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                        <option value="">Todos os tipos</option>
                        <option value="idoso">ğŸ‘´ Idosos</option>
                        <option value="deficiencia">â™¿ Pessoas com DeficiÃªncia</option>
                        <option value="cronica">ğŸ¥ DoenÃ§as CrÃ´nicas</option>
                        <option value="rara">ğŸ”¬ DoenÃ§as Raras</option>
                        <option value="outros">ğŸ“‹ Outros</option>
                    </select>
                    <input type="text" id="buscaNome" placeholder="Buscar por nome..." class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                
                <div id="listaPacientes" class="space-y-4">
                    <!-- Lista serÃ¡ preenchida dinamicamente -->
                </div>
            </div>
        </div>

        <!-- SeÃ§Ã£o Leitor QR -->
        <div id="section-leitor" class="section hidden">
            <div class="bg-white rounded-xl shadow-xl p-8 max-w-4xl mx-auto">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                    <span class="bg-indigo-100 p-2 rounded-lg mr-3">ğŸ“±</span>
                    Leitor de QR Code
                </h2>
                
                <div class="text-center">
                    <div class="bg-gray-100 rounded-lg p-8 mb-6">
                        <div class="text-6xl mb-4">ğŸ“±</div>
                        <p class="text-gray-600 mb-4">Cole o cÃ³digo QR ou dados do paciente aqui:</p>
                        <textarea id="qrInput" rows="6" placeholder="Cole os dados do QR Code aqui..." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"></textarea>
                        <button onclick="lerQRCode()" class="mt-4 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                            ğŸ” Ler Dados
                        </button>
                    </div>
                    
                    <div id="dadosLidos" class="hidden">
                        <!-- Dados do QR serÃ£o exibidos aqui -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal QR Code -->
        <div id="qrModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
            <div class="bg-white rounded-xl p-8 max-w-md mx-4">
                <div class="text-center">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">QR Code Gerado</h3>
                    <div id="qrCodeContainer" class="mb-4"></div>
                    <p class="text-sm text-gray-600 mb-4">Salve ou imprima este QR Code</p>
                    <div class="flex space-x-4">
                        <button onclick="downloadQR()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                            ğŸ’¾ Baixar
                        </button>
                        <button onclick="closeModal()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors">
                            âœ–ï¸ Fechar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dados dos pacientes (simulando banco de dados local)
        let pacientes = JSON.parse(localStorage.getItem('pacientesMedicos')) || [];
        let currentQRData = '';

        // Dados de exemplo para demonstraÃ§Ã£o
        if (pacientes.length === 0) {
            const exemplosPacientes = [
                {
                    id: 1,
                    nome: "Maria Silva Santos",
                    nascimento: "1945-03-15",
                    cpf: "123.456.789-00",
                    telefone: "(11) 99999-1111",
                    tipoPaciente: "idoso",
                    tipoSanguineo: "O+",
                    condicoes: "Diabetes tipo 2, HipertensÃ£o arterial, Artrose",
                    medicamentos: "Metformina 850mg 2x/dia, Losartana 50mg 1x/dia, Paracetamol conforme necessÃ¡rio",
                    alergias: "Penicilina, Dipirona",
                    medico: "Dr. JoÃ£o Cardiologista - CRM 12345-SP",
                    contatoEmergencia: "Filho: Pedro Santos (11) 98888-2222",
                    observacoes: "Paciente com mobilidade reduzida, usa bengala"
                },
                {
                    id: 2,
                    nome: "Carlos Eduardo Lima",
                    nascimento: "1980-07-22",
                    cpf: "987.654.321-00",
                    telefone: "(11) 97777-3333",
                    tipoPaciente: "deficiencia",
                    tipoSanguineo: "A+",
                    condicoes: "Paraplegia, InfecÃ§Ã£o urinÃ¡ria recorrente",
                    medicamentos: "AntibiÃ³tico profilÃ¡tico, Vitamina D",
                    alergias: "Nenhuma conhecida",
                    medico: "Dra. Ana Neurologista - CRM 54321-SP",
                    contatoEmergencia: "Esposa: Lucia Lima (11) 96666-4444",
                    observacoes: "Cadeirante, necessita acessibilidade"
                },
                {
                    id: 3,
                    nome: "Ana Paula Oliveira",
                    nascimento: "1975-11-08",
                    cpf: "456.789.123-00",
                    telefone: "(11) 95555-5555",
                    tipoPaciente: "rara",
                    tipoSanguineo: "B-",
                    condicoes: "SÃ­ndrome de Ehlers-Danlos",
                    medicamentos: "AnalgÃ©sicos, Fisioterapia regular",
                    alergias: "LÃ¡tex, Aspirina",
                    medico: "Dr. Roberto Geneticista - CRM 98765-SP",
                    contatoEmergencia: "MÃ£e: Rosa Oliveira (11) 94444-6666",
                    observacoes: "Pele muito frÃ¡gil, evitar procedimentos invasivos"
                }
            ];
            
            pacientes = exemplosPacientes;
            localStorage.setItem('pacientesMedicos', JSON.stringify(pacientes));
        }

        // NavegaÃ§Ã£o entre seÃ§Ãµes
        function showSection(section) {
            // Esconder todas as seÃ§Ãµes
            document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
            
            // Mostrar seÃ§Ã£o selecionada
            document.getElementById(`section-${section}`).classList.remove('hidden');
            document.getElementById(`section-${section}`).classList.add('fade-in');
            
            // Atualizar botÃµes
            document.querySelectorAll('button[id^="btn-"]').forEach(btn => {
                btn.classList.remove('bg-indigo-600', 'text-white');
                btn.classList.add('text-indigo-600', 'hover:bg-indigo-50');
            });
            
            document.getElementById(`btn-${section}`).classList.add('bg-indigo-600', 'text-white');
            document.getElementById(`btn-${section}`).classList.remove('text-indigo-600', 'hover:bg-indigo-50');
            
            // Atualizar lista se necessÃ¡rio
            if (section === 'lista') {
                atualizarLista();
            }
        }

        // FormataÃ§Ã£o de CPF
        document.getElementById('cpf').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            value = value.replace(/(\d{3})(\d)/, '$1.$2');
            value = value.replace(/(\d{3})(\d)/, '$1.$2');
            value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
            e.target.value = value;
        });

        // FormataÃ§Ã£o de telefone
        document.getElementById('telefone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            value = value.replace(/(\d{2})(\d)/, '($1) $2');
            value = value.replace(/(\d{5})(\d)/, '$1-$2');
            e.target.value = value;
        });

        // Cadastro de paciente
        document.getElementById('patientForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const paciente = {
                id: Date.now(),
                nome: document.getElementById('nome').value,
                nascimento: document.getElementById('nascimento').value,
                cpf: document.getElementById('cpf').value,
                telefone: document.getElementById('telefone').value,
                tipoPaciente: document.getElementById('tipoPaciente').value,
                tipoSanguineo: document.getElementById('tipoSanguineo').value,
                condicoes: document.getElementById('condicoes').value,
                medicamentos: document.getElementById('medicamentos').value,
                alergias: document.getElementById('alergias').value,
                medico: document.getElementById('medico').value,
                contatoEmergencia: document.getElementById('contatoEmergencia').value,
                observacoes: document.getElementById('observacoes').value,
                dataCadastro: new Date().toISOString()
            };
            
            pacientes.push(paciente);
            localStorage.setItem('pacientesMedicos', JSON.stringify(pacientes));
            
            // Gerar QR Code
            gerarQRCode(paciente);
            
            // Limpar formulÃ¡rio
            document.getElementById('patientForm').reset();
            
            // Mostrar mensagem de sucesso
            alert('âœ… Paciente cadastrado com sucesso! QR Code gerado.');
        });

        // Gerar QR Code
        function gerarQRCode(paciente) {
            const qrData = JSON.stringify({
                nome: paciente.nome,
                nascimento: paciente.nascimento,
                tipoPaciente: paciente.tipoPaciente,
                tipoSanguineo: paciente.tipoSanguineo,
                condicoes: paciente.condicoes,
                medicamentos: paciente.medicamentos,
                alergias: paciente.alergias,
                medico: paciente.medico,
                contatoEmergencia: paciente.contatoEmergencia,
                telefone: paciente.telefone,
                observacoes: paciente.observacoes
            });
            
            currentQRData = qrData;
            
            const container = document.getElementById('qrCodeContainer');
            container.innerHTML = '';
            
            QRCode.toCanvas(container, qrData, {
                width: 256,
                margin: 2,
                color: {
                    dark: '#1f2937',
                    light: '#ffffff'
                }
            }, function (error) {
                if (error) console.error(error);
                document.getElementById('qrModal').classList.remove('hidden');
                document.getElementById('qrModal').classList.add('flex');
            });
        }

        // Download QR Code
        function downloadQR() {
            const canvas = document.querySelector('#qrCodeContainer canvas');
            const link = document.createElement('a');
            link.download = 'qr-code-medico.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        // Fechar modal
        function closeModal() {
            document.getElementById('qrModal').classList.add('hidden');
            document.getElementById('qrModal').classList.remove('flex');
        }

        // Atualizar lista de pacientes
        function atualizarLista() {
            const lista = document.getElementById('listaPacientes');
            const filtroTipo = document.getElementById('filtroTipo').value;
            const buscaNome = document.getElementById('buscaNome').value.toLowerCase();
            
            let pacientesFiltrados = pacientes.filter(p => {
                const matchTipo = !filtroTipo || p.tipoPaciente === filtroTipo;
                const matchNome = !buscaNome || p.nome.toLowerCase().includes(buscaNome);
                return matchTipo && matchNome;
            });
            
            document.getElementById('totalPacientes').textContent = pacientesFiltrados.length;
            
            lista.innerHTML = pacientesFiltrados.map(paciente => {
                const tipoIcons = {
                    idoso: 'ğŸ‘´',
                    deficiencia: 'â™¿',
                    cronica: 'ğŸ¥',
                    rara: 'ğŸ”¬',
                    outros: 'ğŸ“‹'
                };
                
                const idade = new Date().getFullYear() - new Date(paciente.nascimento).getFullYear();
                
                return `
                    <div class="border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-shadow">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-800">${paciente.nome}</h3>
                                <p class="text-gray-600">${tipoIcons[paciente.tipoPaciente]} ${paciente.tipoPaciente.charAt(0).toUpperCase() + paciente.tipoPaciente.slice(1)} â€¢ ${idade} anos â€¢ ${paciente.tipoSanguineo}</p>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="visualizarPaciente(${paciente.id})" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors">
                                    ğŸ‘ï¸ Ver
                                </button>
                                <button onclick="gerarQRCode(${JSON.stringify(paciente).replace(/"/g, '&quot;')})" class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors">
                                    ğŸ“± QR
                                </button>
                                <button onclick="excluirPaciente(${paciente.id})" class="bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors">
                                    ğŸ—‘ï¸
                                </button>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <div>
                                <strong>CondiÃ§Ãµes:</strong> ${paciente.condicoes || 'Nenhuma registrada'}
                            </div>
                            <div>
                                <strong>Contato:</strong> ${paciente.telefone}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Visualizar paciente
        function visualizarPaciente(id) {
            const paciente = pacientes.find(p => p.id === id);
            if (!paciente) return;
            
            const tipoIcons = {
                idoso: 'ğŸ‘´ Idoso',
                deficiencia: 'â™¿ Pessoa com DeficiÃªncia',
                cronica: 'ğŸ¥ DoenÃ§a CrÃ´nica',
                rara: 'ğŸ”¬ DoenÃ§a Rara',
                outros: 'ğŸ“‹ Outros'
            };
            
            const idade = new Date().getFullYear() - new Date(paciente.nascimento).getFullYear();
            
            alert(`
ğŸ“‹ DADOS DO PACIENTE

ğŸ‘¤ Nome: ${paciente.nome}
ğŸ‚ Idade: ${idade} anos
ğŸ©¸ Tipo SanguÃ­neo: ${paciente.tipoSanguineo}
ğŸ“± Telefone: ${paciente.telefone}
ğŸ‘¥ Tipo: ${tipoIcons[paciente.tipoPaciente]}

ğŸ¥ INFORMAÃ‡Ã•ES MÃ‰DICAS:
â€¢ CondiÃ§Ãµes: ${paciente.condicoes || 'Nenhuma'}
â€¢ Medicamentos: ${paciente.medicamentos || 'Nenhum'}
â€¢ Alergias: ${paciente.alergias || 'Nenhuma'}
â€¢ MÃ©dico: ${paciente.medico || 'NÃ£o informado'}

ğŸš¨ EMERGÃŠNCIA:
â€¢ Contato: ${paciente.contatoEmergencia || 'NÃ£o informado'}
â€¢ ObservaÃ§Ãµes: ${paciente.observacoes || 'Nenhuma'}
            `);
        }

        // Excluir paciente
        function excluirPaciente(id) {
            if (confirm('Tem certeza que deseja excluir este paciente?')) {
                pacientes = pacientes.filter(p => p.id !== id);
                localStorage.setItem('pacientesMedicos', JSON.stringify(pacientes));
                atualizarLista();
            }
        }

        // Ler QR Code
        function lerQRCode() {
            const input = document.getElementById('qrInput').value.trim();
            if (!input) {
                alert('Por favor, cole os dados do QR Code.');
                return;
            }
            
            try {
                const dados = JSON.parse(input);
                exibirDadosLidos(dados);
            } catch (error) {
                alert('Dados do QR Code invÃ¡lidos. Verifique se copiou corretamente.');
            }
        }

        // Exibir dados lidos do QR
        function exibirDadosLidos(dados) {
            const container = document.getElementById('dadosLidos');
            const idade = new Date().getFullYear() - new Date(dados.nascimento).getFullYear();
            
            container.innerHTML = `
                <div class="bg-red-50 border-l-4 border-red-500 p-6 rounded-lg text-left">
                    <h3 class="text-xl font-bold text-red-800 mb-4">ğŸš¨ INFORMAÃ‡Ã•ES MÃ‰DICAS DE EMERGÃŠNCIA</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-2">ğŸ‘¤ Dados Pessoais</h4>
                            <p><strong>Nome:</strong> ${dados.nome}</p>
                            <p><strong>Idade:</strong> ${idade} anos</p>
                            <p><strong>Tipo SanguÃ­neo:</strong> <span class="bg-red-200 px-2 py-1 rounded font-bold">${dados.tipoSanguineo}</span></p>
                            <p><strong>Telefone:</strong> ${dados.telefone}</p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-2">ğŸš¨ Contato de EmergÃªncia</h4>
                            <p class="bg-yellow-100 p-2 rounded">${dados.contatoEmergencia || 'NÃ£o informado'}</p>
                        </div>
                        
                        <div class="md:col-span-2">
                            <h4 class="font-semibold text-red-700 mb-2">âš ï¸ ALERGIAS</h4>
                            <p class="bg-red-100 p-3 rounded font-semibold">${dados.alergias || 'Nenhuma alergia conhecida'}</p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-2">ğŸ¥ CondiÃ§Ãµes MÃ©dicas</h4>
                            <p>${dados.condicoes || 'Nenhuma condiÃ§Ã£o registrada'}</p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-2">ğŸ’Š Medicamentos</h4>
                            <p>${dados.medicamentos || 'Nenhum medicamento registrado'}</p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-2">ğŸ‘¨â€âš•ï¸ MÃ©dico ResponsÃ¡vel</h4>
                            <p>${dados.medico || 'NÃ£o informado'}</p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-2">ğŸ“ ObservaÃ§Ãµes Especiais</h4>
                            <p>${dados.observacoes || 'Nenhuma observaÃ§Ã£o'}</p>
                        </div>
                    </div>
                </div>
            `;
            
            container.classList.remove('hidden');
            container.classList.add('fade-in');
        }

        // Filtros da lista
        document.getElementById('filtroTipo').addEventListener('change', atualizarLista);
        document.getElementById('buscaNome').addEventListener('input', atualizarLista);

        // Inicializar
        showSection('cadastro');
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'964d537ae6868125',t:'MTc1MzQ2NDAwNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
